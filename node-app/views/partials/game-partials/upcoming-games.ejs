<body>
    <div class="games-title">
        <h1>Upcoming games!</h1>
    </div>
    <div class="upcoming-leagues">
        <!-- Forms for each league button -->
        <form action="/games/upcoming-games" method="GET" class="league-form">
            <input type="hidden" name="leagueId" value="253">
            <button type="submit">MLS</button>
        </form>
        <form action="/games/upcoming-games" method="GET" class="league-form">
            <input type="hidden" name="leagueId" value="255">
            <button type="submit">USL</button>
        </form>
        <form action="/games/upcoming-games" method="GET" class="league-form">
            <input type="hidden" name="leagueId" value="39">
            <button type="submit">EPL</button>
        </form>
    </div>
    <div class="center-wrapper">
        <div class="team-games-container">
            <% // Ensure dbMLSGames is always an array %>
            <% const gamesArray = Array.isArray(upcoming) ? upcoming.flat() : [upcoming]; %>
            <% if (gamesArray.length === 0) { %>
                <%- include('../partials/no-games') %>
            <% } else { %>
            <% gamesArray.forEach(game => { %>
                <div class="team-game-team">
                    <% if (game.fixture_teams && game.fixture_teams.home && game.fixture_teams.away) { %>
                        <h3><%= game.fixture_teams.home.name %> vs <%= game.fixture_teams.away.name %></h3>
                        <img src="<%= game.fixture_teams.home.logo %>" alt="<%= game.fixture_teams.home.name %> Logo" class="team-logo">
                        <img src="<%= game.fixture_teams.away.logo %>" alt="<%= game.fixture_teams.away.name %> Logo" class="team-logo">
                        <p>Date: <%= new Date(game.fixture_date).toLocaleString() %></p>
                    <% } else { %>
                        <p>Some game data is missing.</p>
                    <% } %>
                </div>
            <% }); %>
            <% } %>
        </div>
    </div>
</body>
